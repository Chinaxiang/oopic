## ğŸš€ å–”å–”å›¾åºŠ

ä½œä¸ºä¸€åITæ°‘å·¥ï¼Œå¹³æ—¶å–œæ¬¢å†™ä¸€äº›æ–‡æ¡£ï¼Œåšå®¢ï¼Œå¹¶ä¸”æ¯”è¾ƒå–œæ¬¢ Markdown è¯­æ³•ï¼Œä½†ä¸€ç›´ä»¥æ¥æ¯”è¾ƒå›°æ‰°çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ’å…¥å›¾ç‰‡éº»çƒ¦ï¼Œå› ä¸ºæ–‡æ¡£å¯èƒ½ä¼šæ”¾ç½®åˆ°å„ä¸ªç½‘ç«™ä¸­ï¼Œå¦‚ä½•ä¿è¯å›¾ç‰‡èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºæ˜¯ä¸€ä»¶å¤´ç—›çš„äº‹æƒ…ã€‚å¦å¤–ï¼Œå›¾ç‰‡ä¸Šä¼ è¦è¶³å¤Ÿæ–¹ä¾¿ï¼Œæ­£å¥½ Chrome æ’ä»¶èƒ½å®Œå…¨æ»¡è¶³éœ€æ±‚ã€‚

### ç‰¹ç‚¹

- æ”¯æŒç‚¹é€‰/æ‹–æ‹½/æœ¬åœ°ç²˜è´´3ç§æ–¹å¼ä¸Šä¼ å›¾ç‰‡è‡³å›¾åºŠ
- æ”¯æŒå³é”®ä¸Šä¼ ç½‘é¡µå›¾ç‰‡
- æ”¯æŒæ‰¹é‡ä¸Šä¼ 
- å¯ç”Ÿæˆå›¾ç‰‡é“¾æ¥,HTML,UBBå’ŒMarkdownå››ç§æ ¼å¼
- å†å²æµè§ˆ
- æ”¯æŒé…ç½®å¤šç§å­˜å‚¨åç«¯

å¥½ç”¨è®°å¾—ç»™ç‚¹å¥½è¯„å“Ÿã€‚

### é»˜è®¤å­˜å‚¨

é»˜è®¤é‡‡ç”¨ SM.MS å›¾åºŠï¼Œæ”¯æŒå…è´¹å­˜å‚¨ï¼Œä½†ä¼šæœ‰éƒ¨åˆ†é™åˆ¶ã€‚

- å¤§å°5Må†…
- æ¯åˆ†é’Ÿï¼Œæ¯å°æ—¶ï¼Œæ¯å¤©ï¼Œæ¯å‘¨ï¼Œæ¯æœˆæœ‰ä¸€å®šæ•°é‡çš„é™åˆ¶ï¼Œåº”è¯¥è¶³å¤Ÿç”¨


### å›¾å£³

å›¾å£³ï¼Œå…è´¹å›¾åºŠï¼Œè¯·é˜…è¯»é¡»çŸ¥ï¼šhttps://imgkr.com/

å›¾å£³ä¸Šä¼ æ ¡éªŒReferer, Chromeç°åœ¨ç¦ç”¨äº†ajax refererå¤´çš„æ›´æ”¹ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨è¿›è¡Œä¸­è½¬ã€‚

[å›¾å£³é…ç½®æœ¬åœ°ä»£ç†](https://mp.weixin.qq.com/s/BB41sswbMrQfreitQPDzjA)

> curl æ¨¡æ‹Ÿ

```
curl -X POST -H "Referer: https://imgkr.com/" -F 'file=@qrcode.jpg' https://imgkr.com/api/files/upload
```

> nginx é…ç½®

```
location /api/files/upload {
    proxy_set_header Host imgkr.com;
    proxy_set_header Referer https://imgkr.com/;
    proxy_set_header Origin https://imgkr.com/;
    proxy_pass https://imgkr.com;
}
```

### ä¸ƒç‰›äº‘å­˜å‚¨

ç°åœ¨çš„bucketéœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåï¼ŒåŸŸåè¿˜éœ€è¦å¤‡æ¡ˆï¼Œæ¯”è¾ƒéš¾æï¼Œå»ºè®®ç›´æ¥ä¸Šé˜¿é‡Œäº‘OSS.

### é˜¿é‡Œäº‘OSS

é‡‡ç”¨PostObjectæ¨¡å¼ï¼š

https://help.aliyun.com/document_detail/31988.htm

é˜¿é‡Œäº‘OSSéœ€è¦ç»‘å®šè‡ªå®šä¹‰åŸŸååæ‰èƒ½æµè§ˆå™¨ç›´æ¥é¢„è§ˆï¼Œå¦åˆ™ä¼šå¼¹å‡ºä¸‹è½½ï¼Œä¸è¿‡ä¸å½±å“ä½œä¸ºå›¾åºŠçš„ä½¿ç”¨ã€‚

### è‡ªå®šä¹‰æ‰©å±•

æœ‰ä¸€å®šå¼€å‘èƒ½åŠ›çš„å¯ä»¥æ ¹æ®å…¶ä»–å­˜å‚¨è¿›è¡Œæ‰©å±•ï¼Œæä¾›å¦‚ä¸‹èµ„æ–™ï¼š

- upUrl: ä¸Šä¼ æ¥å£å®Œå…¨è·¯å¾„ï¼ŒPOST è¡¨å•ä¸Šä¼ 
- buildForm(file): æ„å»ºè¡¨å•å‚æ•°æ–¹æ³•
- parseRet(text, formData): è§£æajaxå“åº”å†…å®¹ï¼Œè¿”å›å›¾ç‰‡çš„å®Œå…¨è®¿é—®è·¯å¾„

```
upUrl = 'http://yoururl';
function buildForm(file) {
    var data = new FormData();
    data.append('file', file);
    return data;
}
function parseRet(text, formData) {
    var res = JSON.parse(text);
    var image_url = res.data;
    return image_url;
}
```
